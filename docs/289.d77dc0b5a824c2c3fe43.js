"use strict";(self.webpackChunkrivertech_fe_interview=self.webpackChunkrivertech_fe_interview||[]).push([[289],{7289:(V,Z,a)=>{a.r(Z),a.d(Z,{CasinoGameModule:()=>X});var d=a(8583),u=a(7957),h=a(4762),w=a(5319),c=a(8645),f=a(1013),v=a(8906),l=a(3679),L=a(4395),M=a(9761),O=a(7519),A=a(8002),_=a(1841),e=a(7716),g=a(8295),P=a(9983);let I=(()=>{class i{constructor(){this.label=""}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-input-text"]],inputs:{label:"label",control:"control"},decls:2,vars:2,consts:[["appearance","outline"],["matInput","",1,"form-control",3,"formControl","placeholder"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-form-field",0),e._UZ(1,"input",1),e.qZA()),2&t&&(e.xp6(1),e.s9C("placeholder",n.label),e.Q6J("formControl",n.control))},directives:[g.KE,P.Nt,l.Fj,l.JJ,l.oH],encapsulation:2}),i})();var J=a(2842),R=a(2458);const N=["matMultiRef"];function U(i,o){if(1&i&&(e.TgZ(0,"span",6),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.AsE(" (+",((null==t.control.value?null:t.control.value.length)||0)-1," ",2===(null==t.control.value?null:t.control.value.length)?"other":"others",") ")}}function B(i,o){if(1&i&&(e.TgZ(0,"mat-option",7),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Y(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().clearFilters()}),e._uU(1,"Reset"),e.qZA()}}let D=(()=>{class i{constructor(){this.options=[],this.selectedOptions=[],this.isShowResetBtn=!1,this.label=""}clearFilters(){this.matMultiRef.options.forEach(t=>t.deselect())}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-multi-dropdown"]],viewQuery:function(t,n){if(1&t&&e.Gf(N,5),2&t){let s;e.iGM(s=e.CRH())&&(n.matMultiRef=s.first)}},inputs:{options:"options",selectedOptions:"selectedOptions",control:"control",isShowResetBtn:"isShowResetBtn",label:"label"},decls:10,vars:7,consts:[["appearance","fill"],["multiple","",3,"formControl","ngModel","ngModelChange"],["matMultiRef",""],["class","add-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["class","reset-btn","mat-raised-button","",3,"click",4,"ngIf"],[1,"add-additional-selection"],[3,"value"],["mat-raised-button","",1,"reset-btn",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-form-field",0),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",1,2),e.NdJ("ngModelChange",function(p){return n.selectedOptions=p}),e.TgZ(5,"mat-select-trigger"),e._uU(6),e.YNc(7,U,2,2,"span",3),e.qZA(),e.YNc(8,B,2,2,"mat-option",4),e.qZA(),e.qZA(),e.YNc(9,Y,2,0,"button",5)),2&t&&(e.xp6(2),e.Oqu(n.label),e.xp6(1),e.Q6J("formControl",n.control)("ngModel",n.selectedOptions),e.xp6(3),e.hij(" ",(null==n.control.value?null:n.control.value[0])||""," "),e.xp6(1),e.Q6J("ngIf",((null==n.control.value?null:n.control.value.length)||0)>1),e.xp6(1),e.Q6J("ngForOf",n.options),e.xp6(1),e.Q6J("ngIf",n.isShowResetBtn))},directives:[g.KE,g.hX,J.gD,l.JJ,l.oH,J.$L,d.O5,d.sg,R.ey],styles:[".add-additional-selection[_ngcontent-%COMP%]{opacity:.75;font-size:.75em}.reset-btn[_ngcontent-%COMP%]{margin-left:5px;border-radius:5px;background-color:#1588aa;color:#fff;height:25px}"]}),i})();var Q=a(8723);function $(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClearSearch()}),e._UZ(1,"i",8),e.qZA()}}function H(i,o){if(1&i&&(e.ynx(0),e._UZ(1,"app-game",11),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("game",t)}}function j(i,o){if(1&i&&(e.TgZ(0,"div",9),e.YNc(1,H,2,1,"ng-container",10),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.allFilteredGamesList)("ngForTrackBy",t.trackGame)}}class r{constructor(o,t,n){this._store=o,this._activatedRoute=t,this._location=n,this.allGamesList=[],this.allFilteredGamesList=[],this.providersList=[],this.searchGameForm=new l.NI(""),this.providerGameForm=new l.NI,this.allSubscriptions=new w.w,this.searchGameText="",this.selectedProviderList=[],this.allSubscriptions.add(this.isGamesLoaded$.subscribe(s=>{s||this._store.dispatch(new f.K.GetGames)}))}ngOnInit(){this.allSubscriptions.add(this.gamesData$.subscribe(o=>{this.allGamesList=o,this.allFilteredGamesList=o,this.providersList=this.getProviders(),this.getAppliedFilters()})),this.manageSearchFilters()}getAppliedFilters(){const{searchTerm:o,provider:t}=this._activatedRoute.snapshot.queryParams;!o&&!t||(o&&this.searchGameForm.setValue(o),t&&(Array.isArray(t)?(this.selectedProviderList=t,this.providerGameForm.setValue(t)):(this.selectedProviderList.push(t),this.providerGameForm.setValue([t]))),(o||t)&&(this.allFilteredGamesList=this.filterOutGames()))}trackGame(o,t){return t.id}onClearSearch(){this.searchGameForm.setValue("")}getProviders(){return[...new Set(this.allGamesList.map(t=>(null==t?void 0:t.providerName)?t.providerName:""))]}manageSearchFilters(){this.allSubscriptions.add(this.searchGameForm.valueChanges.pipe((0,L.b)(500),(0,M.O)(null),(0,O.x)(),(0,A.U)(()=>(this.addToQueryParams(),this.filterOutGames()))).subscribe(o=>this.allFilteredGamesList=o)),this.allSubscriptions.add(this.providerGameForm.valueChanges.pipe((0,L.b)(200),(0,M.O)(null),(0,O.x)(),(0,A.U)(()=>(this.addToQueryParams(),this.filterOutGames()))).subscribe(o=>this.allFilteredGamesList=o))}removeInvalidQueryParams(o){for(const t in o)null==o[t]&&delete o[t];return o}addToQueryParams(){var o,t;let n={searchTerm:(null===(o=this.searchGameForm)||void 0===o?void 0:o.value)||null,provider:(null===(t=this.providerGameForm)||void 0===t?void 0:t.value)||null};n=this.removeInvalidQueryParams(n);const s=(new _.LE).appendAll(n);this._location.replaceState(location.pathname,s.toString())}filterOutGames(){var o,t;return this.searchGameForm.value||this.providerGameForm?null===this.searchGameForm.value&&0===(null===(t=null===(o=this.providerGameForm)||void 0===o?void 0:o.value)||void 0===t?void 0:t.length)?this.allGamesList:this.allGamesList.filter(n=>{var s,p,G,C,b,F,x,y,T,S;return 0!==(null===(p=null===(s=this.providerGameForm)||void 0===s?void 0:s.value)||void 0===p?void 0:p.length)?(null===(G=n.title)||void 0===G?void 0:G.toLowerCase().includes((null===(b=null===(C=this.searchGameForm)||void 0===C?void 0:C.value)||void 0===b?void 0:b.toLowerCase())||""))&&(null===(x=null===(F=this.providerGameForm)||void 0===F?void 0:F.value)||void 0===x?void 0:x.includes(n.providerName)):null===(y=n.title)||void 0===y?void 0:y.toLowerCase().includes((null===(S=null===(T=this.searchGameForm)||void 0===T?void 0:T.value)||void 0===S?void 0:S.toLowerCase())||"")}):[]}ngOnDestroy(){var o;null===(o=this.allSubscriptions)||void 0===o||o.unsubscribe()}}r.\u0275fac=function(o){return new(o||r)(e.Y36(c.yh),e.Y36(u.gz),e.Y36(d.Ye))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-casino-games"]],decls:9,vars:9,consts:[[1,"app-home__title"],[1,"filter-container"],[1,"filter-items"],[3,"label","control"],["class","input-group-text",3,"click",4,"ngIf"],[3,"selectedOptions","options","control","isShowResetBtn","label"],["class","game-container",4,"ngIf"],[1,"input-group-text",3,"click"],[1,"fa-light","fa-xmark"],[1,"game-container"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"game-tile",3,"game"]],template:function(o,t){1&o&&(e.TgZ(0,"h1",0),e._uU(1,"All Games"),e.qZA(),e.TgZ(2,"div",1),e.TgZ(3,"form",2),e._UZ(4,"app-input-text",3),e.YNc(5,$,2,0,"span",4),e.qZA(),e.TgZ(6,"form"),e._UZ(7,"app-multi-dropdown",5),e.qZA(),e.qZA(),e.YNc(8,j,2,2,"div",6)),2&o&&(e.xp6(4),e.Q6J("label","Search Game")("control",t.searchGameForm),e.xp6(1),e.Q6J("ngIf",null==t.searchGameForm?null:t.searchGameForm.value),e.xp6(2),e.Q6J("selectedOptions",t.selectedProviderList)("options",t.providersList)("control",t.providerGameForm)("isShowResetBtn",!0)("label","Search Providers"),e.xp6(1),e.Q6J("ngIf",t.allFilteredGamesList&&0!==t.allFilteredGamesList.length))},directives:[l._Y,l.JL,l.F,I,d.O5,D,d.sg,Q.$],styles:[".filter-container{display:flex;justify-content:space-between;width:calc(100% - 27px);background:#fff;border-radius:14px;margin-bottom:19px;max-height:90px;padding:15px;box-sizing:border-box}.filter-container .filter-items{position:relative}.filter-container .filter-items .input-group-text{position:absolute;cursor:pointer;right:16px;top:50%;transform:translateY(-11px)}.mat-form-field-appearance-outline .mat-form-field-infix{padding:6px 6px 14px;margin-top:0}body .mat-form-field-appearance-fill .mat-form-field-flex{background-color:#fff;border:1px solid #ccc;padding:5px 15px}.mat-form-field-appearance-fill .mat-form-field-infix{padding:0 10px 6px}.mat-form-field-appearance-fill .mat-form-field-underline:before{background-color:transparent}body .mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-20%)}\n"],encapsulation:2}),(0,h.gn)([(0,c.Ph)(v.H.getAllGames)],r.prototype,"gamesData$",void 0),(0,h.gn)([(0,c.Ph)(v.H.getLoadedState)],r.prototype,"isGamesLoaded$",void 0);class m{constructor(o,t){this._activatedRoute=o,this._store=t,this.allSubscriptions=new w.w,this._activatedRoute.paramMap.subscribe(n=>{const s=n.get("slug")||"";this.getSelectedGame(s)})}ngOnInit(){this.allSubscriptions.add(this.getSelectedGame$.subscribe(o=>{o&&(this.selectedGame=o)}))}getSelectedGame(o){this.allSubscriptions.add(this.isGamesLoaded$.subscribe(t=>{t||this._store.dispatch(new f.K.GetGames),this._store.dispatch(new f.K.SetSelectedGame(o))}))}ngOnDestroy(){var o;null===(o=this.allSubscriptions)||void 0===o||o.unsubscribe()}}m.\u0275fac=function(o){return new(o||m)(e.Y36(u.gz),e.Y36(c.yh))},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-casino-game"]],decls:4,vars:2,consts:[[1,"app-home__title"],[1,"selected-game"],[1,"game-tile",3,"showButton","game"]],template:function(o,t){1&o&&(e.TgZ(0,"h1",0),e._uU(1,"My Game"),e.qZA(),e.TgZ(2,"div",1),e._UZ(3,"app-game",2),e.qZA()),2&o&&(e.xp6(3),e.Q6J("showButton",!0)("game",t.selectedGame))},directives:[Q.$],encapsulation:2}),(0,h.gn)([(0,c.Ph)(v.H.getLoadedState)],m.prototype,"isGamesLoaded$",void 0),(0,h.gn)([(0,c.Ph)(v.H.getSelectedGame)],m.prototype,"getSelectedGame$",void 0);const z=[{path:"",component:r},{path:":slug",component:m}];let E=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[u.Bz.forChild(z)],u.Bz]}),i})();var K=a(4466);let X=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,E,K.m]]}),i})()}}]);